<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–î–µ—Ç–∞—ô–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∞ | –ó–ª–∞—Ç–∞—Ä—Å–∫–∞ —Ä–∞–¥—ö–∞ –ë–æ–ª–µ—Å–Ω–∏–∫–æ–≤</title>

  <!-- Fontovi kao na ostatku sajta -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lora:ital,wght@0,400;1,400&family=Montserrat:wght@300;400;500;600&display=swap"
        rel="stylesheet">

  <style>
    :root {
      --gold: #d6b25e;
      --soft-gold: #f1d9a0;
      --bg-deep: #050816;
      --bg-navy: #1e2940;
      --text-light: #f6f3e8;
      --muted: #b3a48a;
      --danger: #ff6b6b;
      --success: #7dd56f;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      font-family: "Montserrat", sans-serif;
      background: radial-gradient(circle at top, var(--bg-navy) 0, var(--bg-deep) 55%, #000 100%);
      color: var(--soft-gold);
      overflow-x: hidden;
    }

    a { color: inherit; text-decoration: none; }
    img { max-width: 100%; display: block; }

    header {
      position: sticky;
      top: 0;
      z-index: 40;
      background: rgba(5, 8, 22, 0.9);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(214, 178, 94, 0.25);
    }

    .header-inner {
      max-width: 1180px;
      margin: 0 auto;
      padding: 14px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand { display: flex; align-items: center; gap: 12px; }

    .brand-mark {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      border: 1px solid rgba(214, 178, 94, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Cinzel", serif;
      color: var(--gold);
      font-size: 18px;
    }

    .brand-text span { display: block; line-height: 1.2; }

    .brand-name {
      font-family: "Cinzel", serif;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      font-size: 14px;
    }

    .brand-sub {
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--muted);
    }

    nav {
      display: flex;
      align-items: center;
      gap: 24px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    nav a { position: relative; padding-bottom: 3px; }

    nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 1px;
      background: var(--gold);
      transition: width .25s ease;
    }

    nav a:hover::after { width: 100%; }

    nav a.is-active { color: var(--gold); }
    nav a.is-active::after { width: 100%; }

    .nav-toggle {
      display: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid rgba(214, 178, 94, 0.5);
      background: transparent;
      color: var(--soft-gold);
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .nav-toggle span,
    .nav-toggle span::before,
    .nav-toggle span::after {
      display: block;
      width: 14px;
      height: 2px;
      background: var(--soft-gold);
      border-radius: 999px;
      position: relative;
      transition: transform .3s, opacity .3s;
    }

    .nav-toggle span::before,
    .nav-toggle span::after {
      content: "";
      position: absolute;
      left: 0;
    }

    .nav-toggle span::before { top: -5px; }
    .nav-toggle span::after { top: 5px; }

    .nav-open .nav-toggle span { transform: rotate(45deg); }
    .nav-open .nav-toggle span::before { transform: rotate(-90deg); top: 0; }
    .nav-open .nav-toggle span::after { opacity: 0; }

    @media (max-width: 768px) {
      nav {
        position: fixed;
        inset: 64px 16px auto 16px;
        padding: 16px 18px;
        border-radius: 18px;
        background: rgba(5, 8, 22, 0.98);
        border: 1px solid rgba(214, 178, 94, 0.3);
        flex-direction: column;
        gap: 14px;
        transform: translateY(-20px);
        opacity: 0;
        pointer-events: none;
        transition: opacity .3s ease, transform .3s ease;
      }

      .nav-open nav {
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0);
      }

      .nav-toggle { display: inline-flex; }
      .header-inner { padding-inline: 18px; }
    }

    main {
      max-width: 1180px;
      margin: 0 auto;
      padding: 40px 24px 60px;
    }

    .product-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      margin-top: 30px;
    }

    .product-image { flex: 1 1 360px; max-width: 460px; }

    .product-image-inner {
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid rgba(214,178,94,0.4);
      box-shadow: 0 22px 60px rgba(0,0,0,0.85);
      background: #000;
    }

    .product-image img { width: 100%; height: auto; display: block; }

    .product-info { flex: 1 1 360px; max-width: 520px; }

    .product-tag {
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .product-info h1 {
      font-family: "Cinzel", serif;
      font-size: 26px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 12px;
    }

    .product-desc {
      font-family: "Lora", serif;
      font-size: 14px;
      color: var(--text-light);
      line-height: 1.7;
      margin-bottom: 18px;
    }

    .product-meta { font-size: 12px; color: var(--muted); margin-bottom: 16px; }
    .product-meta span { display: inline-block; margin-right: 12px; }

    .price {
      font-size: 18px;
      font-weight: 600;
      color: var(--soft-gold);
      margin-bottom: 22px;
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 11px 24px;
      border-radius: 999px;
      border: 1px solid var(--gold);
      background: var(--gold);
      color: #050509;
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      cursor: pointer;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 40px rgba(0,0,0,0.8);
      background: #e0c06e;
    }

    .btn-primary[disabled] {
      opacity: 0.55;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .back-link {
      display: inline-block;
      margin-top: 26px;
      font-size: 12px;
      color: var(--muted);
      text-decoration: underline;
      text-decoration-color: rgba(214,178,94,0.6);
    }

    .back-link:hover { color: var(--soft-gold); }

    /* Badge za status */
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 107, 107, 0.55);
      background: rgba(255, 107, 107, 0.12);
      color: #ffd7d7;
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      margin: 4px 0 14px;
    }

    @media (max-width: 768px) {
      main { padding-inline: 18px; }
      .product-container { flex-direction: column; align-items: center; margin-top: 24px; }
      .product-info { max-width: 100%; }
    }

    footer {
      padding: 24px 18px 18px;
      font-size: 12px;
      color: var(--muted);
      border-top: 1px solid rgba(214, 178, 94, 0.25);
      text-align: center;
    }

    footer span { display: block; margin: 2px 0; }
    footer a { text-decoration: underline; text-decoration-color: rgba(214, 178, 94, 0.6); }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.78);
      display: none;
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .modal.is-open { display: flex; }

    .modal-dialog {
      width: 100%;
      max-width: 520px;
      border-radius: 18px;
      border: 1px solid rgba(214,178,94,0.5);
      background: radial-gradient(circle at top left,
        rgba(255,255,255,0.06),
        rgba(5,8,22,0.98));
      box-shadow: 0 24px 70px rgba(0,0,0,0.9);
      padding: 20px 20px 18px;
      position: relative;
      color: var(--text-light);
    }

    .modal-title {
      font-family: "Cinzel", serif;
      font-size: 18px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 10px;
    }

    .modal-sub { font-size: 12px; color: var(--muted); margin-bottom: 14px; }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: none;
      background: var(--gold);
      color: #050509;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(0,0,0,0.65);
    }

    .modal-close:hover { filter: brightness(0.96); }

    .order-form { margin-top: 8px; }
    .order-form .field { margin-bottom: 10px; }

    .order-form label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      display: block;
      margin-bottom: 4px;
    }

    .order-form input,
    .order-form textarea {
      width: 100%;
      padding: 9px 11px;
      border-radius: 10px;
      border: 1px solid rgba(214,178,94,0.35);
      background: rgba(3,5,14,0.95);
      color: var(--text-light);
      font-size: 13px;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease;
    }

    .order-form input::placeholder,
    .order-form textarea::placeholder { color: rgba(243,236,220,0.55); }

    .order-form input:focus,
    .order-form textarea:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 1px rgba(214,178,94,0.45);
    }

    .order-form textarea { resize: vertical; min-height: 70px; }

    .order-submit {
      margin-top: 6px;
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid var(--gold);
      background: var(--gold);
      color: #050509;
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      font-weight: 600;
      cursor: pointer;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
    }

    .order-submit:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 36px rgba(0,0,0,0.8);
      background: #e0c06e;
    }

    .order-msg {
      margin-top: 8px;
      font-size: 12px;
      min-height: 16px;
      color: var(--success);
    }

    .order-msg.error { color: var(--danger); }

    @media (max-width: 480px) {
      .modal-dialog { padding-inline: 16px; }
    }

    .order-banner {
  max-width: 1180px;
  margin: 26px auto 0;
  padding: 16px 22px;
  border-radius: 16px;
  background: linear-gradient(
    135deg,
    rgba(214,178,94,0.18),
    rgba(214,178,94,0.05)
  );
  border: 1px solid rgba(214,178,94,0.45);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 50px rgba(0,0,0,0.55);
}

.order-banner p {
  font-size: 12px;
  line-height: 1.7;
  color: var(--text-light);
  text-align: center;
  letter-spacing: 0.04em;
}

.order-banner strong {
  color: var(--gold);
  font-weight: 600;
}

@media (max-width: 768px) {
  .order-banner {
    margin: 18px 18px 0;
    padding: 14px 16px;
  }

  .order-banner p {
    font-size: 11px;
  }
}
/* --- LANGUAGE SWITCHER --- */
.lang-switcher {
    position: relative;
    margin-left: 14px;
    display: inline-flex;
    align-items: center;
}

.lang-btn {
    width: 34px;
    height: 34px;
    border-radius: 999px;
    border: 1px solid rgba(214, 178, 94, 0.5);
    background: transparent;
    color: var(--soft-gold);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform .2s ease, background .2s ease, border-color .2s ease;
}

.lang-btn:hover {
    transform: translateY(-1px);
    border-color: var(--gold);
    background: rgba(214, 178, 94, 0.10);
}

.lang-menu {
    position: absolute;
    top: calc(100% + 10px);
    right: 0;
    min-width: 190px;
    border-radius: 14px;
    border: 1px solid rgba(214, 178, 94, 0.3);
    background: rgba(5, 8, 22, 0.98);
    box-shadow: 0 22px 50px rgba(0, 0, 0, 0.7);
    padding: 10px;
    display: none;
    z-index: 999;
}

.lang-switcher.open .lang-menu {
    display: block;
}

.lang-item {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 9px 10px;
    border-radius: 10px;
    border: 1px solid transparent;
    background: transparent;
    color: var(--text-light);
    cursor: pointer;
    font-size: 12px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.lang-item:hover {
    background: rgba(214, 178, 94, 0.10);
    border-color: rgba(214, 178, 94, 0.25);
}

.flag {
    font-size: 16px;
    line-height: 1;
}

/* === GOOGLE TRANSLATE: ukloni top banner (kao na starom sajtu) === */
.goog-te-banner-frame.skiptranslate,
.goog-te-banner-frame,
.goog-te-gadget-icon {
  display: none !important;
}

html body > .skiptranslate,
.goog-te-banner-frame.skiptranslate,
.goog-te-banner-frame {
  display: none !important;
  visibility: hidden !important;
  height: 0 !important;
}

html { top: 0 !important; }
body { top: 0 !important; }

/* dopune koje ƒçesto trebaju na modernijem layout-u */
iframe.goog-te-banner-frame { display: none !important; }
#goog-gt-tt, .goog-tooltip, .goog-tooltip:hover,
.goog-te-balloon-frame {
  display: none !important;
}



  </style>
</head>
<body>

<header>
    <div class="header-inner">
        <div class="brand">
            <div class="brand-mark"><img src="ChatGPT Image Dec 8, 2025, 09_09_13 PM.png" alt="logo"></div>
            <div class="brand-text">
                <span class="brand-name notranslate">–ë–û–õ–ï–°–ù–ò–ö–û–í</span>
                <span class="brand-sub">–∑–ª–∞—Ç–∞—Ä—Å–∫–∞ —Ä–∞–¥—ö–∞ ¬∑ –ù–æ–≤–∏ –°–∞–¥</span>
            </div>
        </div>

        <nav aria-label="–ì–ª–∞–≤–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—ò–∞">
            <a href="index.html#hero">–ù–∞—Å–ª–æ–≤–Ω–∞</a>
            <a href="index.html#about">–û –∑–ª–∞—Ç–∞—Ä–∏</a>
            <a href="index.html#services">–£—Å–ª—É–≥–µ</a>
            <a href="proizvodi.html">–ö–æ–ª–µ–∫—Ü–∏—ò–∞</a>
            <a href="index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç</a>

         
            <!-- –î—É–≥–º–µ ‚Äì Font Awesome –≥–æ–ª—É–± -->
    <a href="https://upsiteful.github.io/Bolesnikov-racing-pigeons/" class="pigeon-btn" aria-label="–¢–∞–∫–º–∏—á–∞—Ä—Å–∫–∏ –≥–æ–ª—É–±–æ–≤–∏">
        <i class="fa-solid fa-dove"></i>
    </a>
 <div class="lang-switcher" id="langSwitcher">
    <button class="lang-btn" id="langBtn" type="button" aria-label="Language">
        <i class="fa-solid fa-globe"></i>
    </button>

   <div class="lang-menu" id="langMenu" role="menu" aria-label="Choose language">
  <button class="lang-item" type="button" data-lang="sr">
    <span class="flag">üá∑üá∏</span> <span class="lang-label notranslate" translate="no">Srpski</span>
  </button>

  <button class="lang-item" type="button" data-lang="en">
    <span class="flag">üá¨üáß</span> <span class="lang-label notranslate" translate="no">English</span>
  </button>

  <button class="lang-item" type="button" data-lang="nl">
    <span class="flag">üá≥üá±</span> <span class="lang-label notranslate" translate="no">Nederlands</span>
  </button>

  <button class="lang-item" type="button" data-lang="de">
    <span class="flag">üá©üá™</span> <span class="lang-label notranslate" translate="no">Deutsch</span>
  </button>

  <button class="lang-item" type="button" data-lang="zh-CN">
    <span class="flag">üá®üá≥</span> <span class="lang-label notranslate" translate="no">‰∏≠Êñá</span>
  </button>

  <button class="lang-item" type="button" data-lang="hu">
    <span class="flag">üá≠üá∫</span> <span class="lang-label notranslate" translate="no">Magyar</span>
  </button>

  <button class="lang-item" type="button" data-lang="es">
    <span class="flag">üá™üá∏</span> <span class="lang-label notranslate" translate="no">Espa√±ol</span>
  </button>

  <button class="lang-item" type="button" data-lang="it">
    <span class="flag">üáÆüáπ</span> <span class="lang-label notranslate" translate="no">Italiano</span>
  </button>
</div>


</div>

<!-- Hidden container for Google Translate -->



        </nav>




        <button class="nav-toggle" aria-label="–ú–µ–Ω–∏">
            <span></span>
        </button>
    </div>
</header>
<section class="order-banner">
  <p>
    –ó–∞ –ø–æ—Ä—É—ü–±–∏–Ω–µ —É –∏–∑–Ω–æ—Å—É –ø—Ä–µ–∫–æ <strong>5.000 RSD</strong> –æ–±–µ–∑–±–µ—í–µ–Ω–∞ —ò–µ
    <strong>–±–µ—Å–ø–ª–∞—Ç–Ω–∞ –¥–æ—Å—Ç–∞–≤–∞</strong> –Ω–∞ —Ç–µ—Ä–∏—Ç–æ—Ä–∏—ò–∏ —Ü–µ–ª–µ –°—Ä–±–∏—ò–µ.
    <br>
    <strong>–ù–æ–≤–∏ –°–∞–¥:</strong> —Å–≤–µ –ø–æ—Ä—É—ü–±–∏–Ω–µ —Å—É –±–µ—Å–ø–ª–∞—Ç–Ω–µ, —É–∑ –º–æ–≥—É—õ–Ω–æ—Å—Ç
    <strong>–¥–æ—Å—Ç–∞–≤–µ –∏—Å—Ç–∏ –¥–∞–Ω</strong> –∑–∞ –ø–æ—Ä—É—ü–±–∏–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–µ –¥–∞–Ω–∞—Å.
    <br>
    –ü–æ–ø—Ä–∞–≤–∫–µ —ò–µ –º–æ–≥—É—õ–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç–∏ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É
    <strong>‚Äû–¥–∞–Ω–∞—Å –∑–∞ –¥–∞–Ω–∞—Å‚Äú</strong> –Ω–∞ —Ç–µ—Ä–∏—Ç–æ—Ä–∏—ò–∏ –ù–æ–≤–æ–≥ –°–∞–¥–∞ –ø—É—Ç–µ–º –∫—É—Ä–∏—Ä—Å–∫–µ —Å–ª—É–∂–±–µ.
    –ó–∞ –¥–µ—Ç–∞—ô–Ω–∏—ò–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—ò–µ, <strong>–∫–æ–Ω—Ç–∞–∫—Ç–∏—Ä–∞—ò—Ç–µ –Ω–∞—Å</strong>.
  </p>
</section>

<main>
  <section id="productSection">
    <div class="product-container" id="productDetails"></div>
    <a href="proizvodi.html" class="back-link">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –∫–æ–ª–µ–∫—Ü–∏—ò—É</a>
  </section>
</main>

<!-- MODAL: forma za poruƒçivanje (EmailJS) -->
<div class="modal" id="orderModal">
  <div class="modal-dialog">
    <button class="modal-close" id="orderClose" aria-label="–ó–∞—Ç–≤–æ—Ä–∏">√ó</button>
    <h2 class="modal-title">–ü–æ—Ä—É—ü–±–∏–Ω–∞</h2>
    <p class="modal-sub">
      –ü–æ–ø—É–Ω–∏—Ç–µ –ø–æ–¥–∞—Ç–∫–µ, –∞ –º–∏ —õ–µ–º–æ –í–∞–º –æ–¥–≥–æ–≤–æ—Ä–∏—Ç–∏ —É –Ω–∞—ò–∫—Ä–∞—õ–µ–º —Ä–æ–∫—É —Ä–∞–¥–∏ –ø–æ—Ç–≤—Ä–¥–µ –∏ –¥–æ–≥–æ–≤–æ—Ä–∞ –æ–∫–æ –¥–µ—Ç–∞—ô–∞.
    </p>

    <form id="orderForm" class="order-form">
      <div class="field">
        <label for="product">–ü—Ä–æ–∏–∑–≤–æ–¥</label>
        <input type="text" name="product" id="product" readonly>
      </div>
        <input type="hidden" name="code" id="code">
  <input type="hidden" name="product_id" id="product_id">

      <div class="field">
        <label for="name">–ò–º–µ –∏ –ø—Ä–µ–∑–∏–º–µ</label>
        <input type="text" name="name" id="name" placeholder="–£–Ω–µ—Å–∏—Ç–µ –∏–º–µ –∏ –ø—Ä–µ–∑–∏–º–µ" required>
      </div>
      <div class="field">
        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <input type="text" name="phone" id="phone" placeholder="–ú–æ–±–∏–ª–Ω–∏ –∏–ª–∏ —Ñ–∏–∫—Å–Ω–∏ –±—Ä–æ—ò" required>
      </div>
      <div class="field">
        <label for="email">–ï-–ø–æ—à—Ç–∞</label>
        <input type="email" name="email" id="email" placeholder="–í–∞—à–∞ –∞–¥—Ä–µ—Å–∞ –µ-–ø–æ—à—Ç–µ" required>
      </div>
      <div class="field">
        <label for="address">–ê–¥—Ä–µ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–æ)</label>
        <input type="text" name="address" id="address" placeholder="–ê–¥—Ä–µ—Å–∞ –∑–∞ –∏—Å–ø–æ—Ä—É–∫—É –∏–ª–∏ –≥—Ä–∞–¥">
      </div>
      <div class="field">
        <label for="note">–ù–∞–ø–æ–º–µ–Ω–∞</label>
        <textarea name="note" id="note" placeholder="–î–æ–¥–∞—Ç–Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—ò–µ, –≤–µ–ª–∏—á–∏–Ω–∞ –ø—Ä—Å—Ç–µ–Ω–∞, —Ä–æ–∫, —Å–ª."></textarea>
      </div>

      <button type="submit" id="orderSubmit" class="order-submit">
        –ü–æ—à–∞—ô–∏ –ø–æ—Ä—É—ü–±–∏–Ω—É
      </button>
    </form>

    <p id="orderMsg" class="order-msg"></p>
  </div>
</div>

<footer>
  <span>¬© 2025 –ó–ª–∞—Ç–∞—Ä—Å–∫–∞ —Ä–∞–¥—ö–∞ –ë–æ–ª–µ—Å–Ω–∏–∫–æ–≤ ¬∑ –°–≤–∞ –ø—Ä–∞–≤–∞ –∑–∞–¥—Ä–∂–∞–Ω–∞.</span>
  <span>–à–µ–≤—Ä–µ—ò—Å–∫–∞ 42, –ù–æ–≤–∏ –°–∞–¥ ¬∑ –¢–µ–ª: 021 6623 822 ¬∑ –ï-–ø–æ—à—Ç–∞: <a href="mailto:v.bolesnikov@gmail.com">v.bolesnikov@gmail.com</a></span>
</footer>

<!-- Font Awesome (za ikonu goluba u nav-u) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js" defer></script>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
  emailjs.init("xDh7yX1H6scPpf4uk");
</script>

<!-- Firebase + logika proizvoda + logika poruƒçivanja -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import {
    getFirestore,
    doc,
    getDoc,
    setDoc,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDyAO-4f5lke0fpB8M5HQY9UEievyoz5w4",
    authDomain: "zlatara-bolesnikov.firebaseapp.com",
    projectId: "zlatara-bolesnikov",
    storageBucket: "zlatara-bolesnikov.firebasestorage.app",
    messagingSenderId: "444327293695",
    appId: "1:444327293695:web:1a83087a7ade3940ffd2ca",
    measurementId: "G-B03TZ5Z1GH"
  };

  const app = initializeApp(firebaseConfig);
  const db  = getFirestore(app);

  const body         = document.body;
  const navToggle    = document.querySelector('.nav-toggle');
  const productWrap  = document.getElementById('productDetails');

  const orderModal   = document.getElementById('orderModal');
  const orderClose   = document.getElementById('orderClose');
  const orderForm    = document.getElementById('orderForm');
  const orderSubmit  = document.getElementById('orderSubmit');
  const orderMsg     = document.getElementById('orderMsg');
  const productInput = document.getElementById('product');
const codeInput    = document.getElementById('code');
const productIdInp = document.getElementById('product_id');

let currentProductCode = "";

  let currentProductTitle = "";
  let currentProductId = "";
  let isAlreadyOrdered = false;

  // mobilni meni
  if (navToggle) {
    navToggle.addEventListener('click', () => {
      body.classList.toggle('nav-open');
    });

    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', () => {
        body.classList.remove('nav-open');
      });
    });
  }

  function openOrderModal() {
  if (isAlreadyOrdered) return;

  if (productInput && currentProductTitle) productInput.value = currentProductTitle;
  if (codeInput) codeInput.value = currentProductCode || "";
  if (productIdInp) productIdInp.value = currentProductId || "";

  orderMsg.textContent = "";
  orderMsg.classList.remove('error');
  orderModal.classList.add('is-open');
}


  function closeOrderModal() {
    orderModal.classList.remove('is-open');
  }

  orderClose.addEventListener('click', closeOrderModal);
  orderModal.addEventListener('click', (e) => {
    if (e.target === orderModal) closeOrderModal();
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && orderModal.classList.contains('is-open')) closeOrderModal();
  });

  async function checkOrderedStatus(productId) {
    // ordered_products/{productId} -> postoji = poruƒçeno
    const oRef = doc(db, "ordered_products", productId);
    const oSnap = await getDoc(oRef);
    return oSnap.exists();
  }

  async function loadProduct() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    currentProductId = id || "";

    if (!id) {
      productWrap.innerHTML = `<p style="text-align:center; color: var(--muted); margin-top:30px;">–ü—Ä–æ–∏–∑–≤–æ–¥ –Ω–∏—ò–µ –ø—Ä–æ–Ω–∞—í–µ–Ω.</p>`;
      return;
    }

    try {
      // prvo proveri da li je veƒá poruƒçen (da sakrijemo dugme)
      isAlreadyOrdered = await checkOrderedStatus(id);

      const ref = doc(db, "products", id);
      const snap = await getDoc(ref);

      if (!snap.exists()) {
        productWrap.innerHTML = `<p style="text-align:center; color: var(--muted); margin-top:30px;">–ü—Ä–æ–∏–∑–≤–æ–¥ –Ω–∏—ò–µ –ø—Ä–æ–Ω–∞—í–µ–Ω.</p>`;
        return;
      }

      const p = { id: snap.id, ...snap.data() };
      currentProductTitle = p.title || "–ü—Ä–æ–∏–∑–≤–æ–¥";
currentProductCode = (p.code || "").toString().trim();

      const priceText = (typeof p.price === "number")
        ? p.price.toLocaleString('sr-RS') + " RSD"
        : (p.price || "");

      productWrap.innerHTML = `
        <div class="product-image">
          <div class="product-image-inner">
            <img src="${p.img || ''}" alt="${p.title || '–ü—Ä–æ–∏–∑–≤–æ–¥'}">
          </div>
        </div>
        <div class="product-info">
          <div class="product-tag">–¥–µ—Ça—ô–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∞</div>
          <h1>${p.title || '–ü—Ä–æ–∏–∑–≤–æ–¥'}</h1>

          ${isAlreadyOrdered ? `
            <div class="status-badge">–ü–æ—Ä—É—á–µ–Ω–æ ¬∑ –Ω–∏—ò–µ –¥–æ—Å—Ç—É–ø–Ω–æ</div>
          ` : ``}

          ${p.desc ? `<p class="product-desc">${p.desc}</p>` : ""}
          <div class="product-meta">
            ${Array.isArray(p.category) && p.category.length
              ? `<span>–∫–∞—Ç–µ–≥–æ—Ä–∏—ò–µ: ${p.category.join(", ")}</span>`
              : ""}
          </div>
          ${priceText ? `<div class="price">${priceText}</div>` : ""}

          ${isAlreadyOrdered ? `
            <button type="button" class="btn-primary" disabled>
              –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ
            </button>
          ` : `
            <button type="button" class="btn-primary" id="orderBtn">
              –ü–æ—Ä—É—á–∏—Ç–µ <span>¬∑</span> ${priceText || '—É–ø–∏—Ç'}
            </button>
          `}
        </div>
      `;

      const orderBtn = document.getElementById('orderBtn');
      if (orderBtn) orderBtn.addEventListener('click', openOrderModal);

    } catch (err) {
      console.error("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —É—á–∏—Ç–∞–≤–∞—ö—É –ø—Ä–æ–∏–∑–≤–æ–¥–∞:", err);
      productWrap.innerHTML = `<p style="text-align:center; color: var(--muted); margin-top:30px;">–î–æ—à–ª–æ —ò–µ –¥–æ –≥—Ä–µ—à–∫–µ –ø—Ä–∏ —É—á–∏—Ç–∞–≤–∞—ö—É –ø—Ä–æ–∏–∑–≤–æ–¥–∞.</p>`;
    }
  }

  // slanje forme preko EmailJS + upis u ordered_products
  orderForm.addEventListener('submit', (e) => {
    e.preventDefault();

    if (!currentProductId || isAlreadyOrdered) return;

    orderSubmit.disabled = true;
    const originalText = orderSubmit.textContent;
    orderSubmit.textContent = "–°–ª–∞—ö–µ‚Ä¶";
    orderMsg.textContent = "";
    orderMsg.classList.remove('error');

    emailjs.sendForm("service_8qua0pz", "template_4cxdpb9", orderForm)
      .then(async () => {
        orderMsg.textContent = "–ü–æ—Ä—É—ü–±–∏–Ω–∞ —ò–µ —É—Å–ø–µ—à–Ω–æ –ø–æ—Å–ª–∞—Ç–∞ ‚úÖ";

        // upi≈°i u ordered_products/{productId} (ne bri≈°emo proizvod)
        try {
         await setDoc(doc(db, "ordered_products", currentProductId), {
  productId: currentProductId,
  title: currentProductTitle || null,
  code: currentProductCode || null,
  orderedAt: serverTimestamp()
});


        } catch (e) {
          console.warn("–ü–æ—Ä—É—ü–±–∏–Ω–∞ —ò–µ –ø–æ—Å–ª–∞—Ç–∞, –∞–ª–∏ —É–ø–∏—Å —É ordered_products –Ω–∏—ò–µ —É—Å–ø–µ–æ:", e);
          // i dalje korisniku ostaje poruka uspeha; ovo je admin/infra problem
        }

        orderForm.reset();
        productInput.value = currentProductTitle;

        setTimeout(() => {
          closeOrderModal();
          orderMsg.textContent = "";
          window.location.href = "proizvodi.html";
        }, 1500);
      })
      .catch((err) => {
        console.error("EmailJS –≥—Ä–µ—à–∫–∞:", err);
        orderMsg.textContent = "–î–æ—à–ª–æ —ò–µ –¥–æ –≥—Ä–µ—à–∫–µ –ø—Ä–∏ —Å–ª–∞—ö—É –ø–æ—Ä—É—ü–±–∏–Ω–µ. –ü–æ–∫—É—à–∞—ò—Ç–µ –ø–æ–Ω–æ–≤–æ.";
        orderMsg.classList.add('error');
      })
      .finally(() => {
        orderSubmit.disabled = false;
        orderSubmit.textContent = originalText;
      });
  });

  loadProduct();
</script>

<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'sr',
      autoDisplay: false
    }, 'google_translate_element');
  }

  function translateLanguage(lang) {
    localStorage.setItem('selectedLanguage', lang);

    if (lang === 'sr') {
      document.cookie = "googtrans=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;";
      location.reload();
      return;
    }

    const select = document.querySelector(".goog-te-combo");
    if (select) {
      select.value = lang;
      select.dispatchEvent(new Event("change"));
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('selectedLanguage') || 'sr';
    if (savedLang === 'sr') return;

    let tries = 0;
    const t = setInterval(() => {
      const select = document.querySelector(".goog-te-combo");
      if (select) {
        select.value = savedLang;
        select.dispatchEvent(new Event("change"));
        clearInterval(t);
      }
      if (++tries > 30) clearInterval(t);
    }, 100);
  });
</script>
<script>
  const langSwitcher = document.getElementById('langSwitcher');
  const langBtn = document.getElementById('langBtn');

  if (langSwitcher && langBtn) {
    langBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      langSwitcher.classList.toggle('open');
    });

    langSwitcher.querySelectorAll('[data-lang]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        translateLanguage(btn.dataset.lang);
        langSwitcher.classList.remove('open');
      });
    });

    document.addEventListener('click', () => {
      langSwitcher.classList.remove('open');
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') langSwitcher.classList.remove('open');
    });
  }
</script>

<div id="google_translate_element" style="display:none;"></div>
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>



</body>
</html>

